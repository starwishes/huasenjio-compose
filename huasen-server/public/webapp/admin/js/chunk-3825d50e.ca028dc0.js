(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3825d50e"],{"6e42":function(e,t,s){"use strict";s("9d0e")},"9d0e":function(e,t,s){},a46f:function(e,t,s){e.exports=s.p+"img/1.df76218f.gif"},aaac:function(e,t,s){"use strict";s.r(t);s("14d9");var l=s("b76a"),i=s.n(l),n={name:"ColumnSelector",components:{HsDrawer:s("1feb").a,Draggable:i.a},props:{currentJournal:{type:Object,default:()=>{}}},data:()=>({searchText:"",selectColumns:[],selectColumnIndex:[],columns:[],activeCollapseName:""}),computed:{displayColumns(){return this.columns.filter(e=>e.name.toUpperCase().includes(this.searchText.toUpperCase()))}},watch:{selectColumnIndex(){this.handleSelectSite()},columns(){this.handleSelectSite()},currentJournal:{handler(e,t){try{this.selectColumnIndex=Array.isArray(JSON.parse(e.columnStore))?[...JSON.parse(e.columnStore)]:[]}catch(e){this.selectColumnIndex=[]}},deep:!0,immediate:!0}},mounted(){this.queryColumn()},methods:{queryColumn(){this.API.findColumnByList({},{notify:!1}).then(e=>{this.columns=e.data})},handleSelectSite(){let e=[];this.selectColumnIndex.forEach(t=>{this.columns.some(s=>{if(s._id===t)return e.push(s),!0})}),this.selectColumns=e},getSelectStatus(e){return this.selectColumnIndex.includes(e._id)},imgUrl:e=>e.icon?e.icon:s("a46f"),selectSite(e){let{_id:t}=e,s=this.selectColumnIndex.indexOf(t);-1===s?this.selectColumnIndex.push(t):this.selectColumnIndex.splice(s,1)},save(){let e=this.selectColumns.map(e=>e._id);this.API.updateJournal({_id:this.currentJournal._id,columnStore:JSON.stringify(e)}).then(e=>{this.$emit("save")})},cancel(){this.$emit("cancel"),this.$emit("update:visible",!1)},remove(e,t){let s=this.selectColumnIndex.indexOf(e._id);-1!==s&&this.selectColumnIndex.splice(s,1)}}},a=(s("6e42"),s("2877")),c=Object(a.a)(n,(function(){var e=this,t=e._self._c;return t("HsDrawer",e._g(e._b({},"HsDrawer",e.$attrs,!1),e.$listeners),[t("div",{staticClass:"column-selector"},[t("div",{staticClass:"column-selector-main"},[t("div",{staticClass:"selected"},[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[e._v("已选择")])]),t("ul",{staticClass:"column-list"},[t("Draggable",{attrs:{filter:".no-drap",animation:"400"},model:{value:e.selectColumns,callback:function(t){e.selectColumns=t},expression:"selectColumns"}},[t("transition-group",e._l(e.selectColumns,(function(s,l){return t("li",{key:s._id,staticClass:"column-item drag-item"},[t("i",{staticClass:"el-icon-rank pointer"}),t("div",{staticClass:"name text no-drap"},[e._v(e._s(e._f("emptyTip")(s.name)))]),t("div",{staticClass:"description text no-drap"},[e._v(e._s(e._f("emptyTip")(s.description)))]),t("i",{staticClass:"el-icon-delete pointer remove no-drap",on:{click:function(t){return e.remove(s,l)}}})])})),0)],1)],1)]),t("div",{staticClass:"selecting"},[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[e._v("待选择")]),t("el-input",{attrs:{placeholder:"请输入栏目名称","suffix-icon":"el-icon-search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),t("ul",{staticClass:"column-group"},e._l(e.displayColumns,(function(s){return t("li",{key:s._id,staticClass:"column",on:{click:function(t){return e.selectSite(s)}}},[t("div",{staticClass:"name text",attrs:{title:s.name}},[e._v(e._s(e._f("emptyTip")(s.name)))]),e.getSelectStatus(s)?t("i",{staticClass:"el-icon-success"}):e._e()])})),0)])]),t("div",{staticClass:"column-selector-footer"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.save}},[e._v("确定配置")]),t("el-button",{attrs:{type:"warning",plain:""},on:{click:e.cancel}},[e._v("取消修改")])],1)])])}),[],!1,null,"003cb1e8",null);t.default=c.exports}}]);